# Local development overrides
# Usage: docker compose -f docker-compose.yml -f docker-compose.local.yml up -d

services:
  # ngrok tunnel for local development
  # Exposes local app to internet for Telegram webhook testing
  ngrok:
    image: ngrok/ngrok:latest
    container_name: beatwager-ngrok
    restart: unless-stopped
    command:
      - "http"
      - "host.docker.internal:8000"
      - "--domain=${NGROK_DOMAIN}"
    ports:
      - "4040:4040"  # ngrok web interface
    environment:
      - NGROK_AUTHTOKEN=${NGROK_AUTHTOKEN}
    extra_hosts:
      - "host.docker.internal:host-gateway"
    networks:
      - beatwager-network

networks:
  beatwager-network:
    external: true
    name: beatwager-app_beatwager-network
